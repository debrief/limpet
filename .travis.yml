language: java
jdk: oraclejdk7
cache:
  directories:
  - "$HOME/.m2"
sudo: false
install:
- mvn --version
before_script:
- export DISPLAY=:99
- sh -e /etc/init.d/xvfb start
- sleep 3
script:
- cd info.limpet.targetplatforms
- mvn clean install
- cd ..
- mvn clean verify -U -B -fae
- "./deploy_ghpages.sh"
env:
  global:
  - GH_REF: github.com/debrief/limpet-update.git
  - secure: F6G/FDGqsInGqiKjQo9hRE1cNQkAqP3UAWM7sC4Q7Y+0cZXv88LWgDxYr2dCH/Qxr7+yzLg4+F1Vk8fztGal3KE2km90vZErBGfewHFOV2ce6DCl55jlHjLMDxgXqMzvkRr1pUWQ2ChSEEi/pOosmya2b2dmuYqSgFDgghN3fy+fhQrOBi9s6d73yUxevcTlLodr/KMtElOZErW3tVrq+a42hIsWXg+4mWv4UrOmDp7xjPVqkTwYxD/UeMZ6vp/E+hvslCi/FWsx8T8q8vT7hy8Eir5JNGY2Jnh8VPH5lD/5rFghPkihE20wk2n0o8/+3/MxRyO0/P7Yc2j09veAoiJXcZYaLjo84D8w9BBiWZ8GVTb0j1/n33Cm8emirRqZRwM6BmwYePlHSgGayd2CHBM36t8WItM3pQu5mZHwgrim9n+zZKza80+IR39bMMB7ULqhvl4nNS5X/Wei1mhx4NvXOgSYsTEAFhnau8O4Esmn5QqOhP5t02MewZ0F2F2zh3YDnS6BGLwBUdiYTSMPpjd0PEYUO5GatKUeJCVz3GteE/T4O0txRXWAP8G3R9BmKWukwifVV/I7oDmZT3UsxKzNdgVnw1xBu7LLTXUyDQzM9A8MXoARrkP/gLh3CrVcLHm3PfUAVq8akoOhcDMVYJQcwkLWXjYBPz15K0TySTw=
deploy:
  provider: releases
  skip_cleanup: true
  api_key:
  file:
  - "/home/travis/build/debrief/limpet/info.limpet.product/target/products/Limpet-linux.gtk.x86_64.tar.gz"
  - "/home/travis/build/debrief/limpet/info.limpet.product/target/products/Limpet-macosx.cocoa.x86_64.tar.gz"
  - "/home/travis/build/debrief/limpet/info.limpet.product/target/products/Limpet-win32.win32.x86_64.zip"
  - "/home/travis/build/debrief/limpet/info.limpet.product/target/products/Limpet-win32.win32.x86.zip"
  on:
    tags: true
    all_branches: true
  api-key:
    secure: jC03tMiLQcd2e2i5sQdywa2FuQUADZBpJyESG4+hpfXhXhKcMFNNtgYjXJ+pipeANsVI13AuwQzUnBxkNXuyarUYPshuWWtPp3aPPTd1gnUf48tXROaqKPvXaHrfKqI3sDxFYv2oQJOHeo39FyaFkihuwowEfbW9ARsHCaWJcfEyvZJU0fTQ/vZZz68ksPaOfCoaIiiAIVCODQUuqzf/R8hCZybL0wFoL8YjtOigBgwxb8UvOE/b8zKjsjuIZ8JDIKYnHZKD1SDAE3EVQ0UgQobc3LZcQZs8Qns3H8cK/iSiHQa29X5Po/hlKVQZ95EpVB8pIDwq1eqLCI27UXVbC7ItwAbHs4KVtWxxXI9oy5PhM8ZikXdtF+lHw07hFnsNQ1igCRtPYndcUuWekm/5aMBA43hCBf3lEbCqgfDuPeY6ObBXcDvwQZRsiIMR/nBDzM0PT8BHs70+FctZoUJqiGSv61F80ze5rUS6oAch9B/dtwbEjaiFmExQQrTLLMDYrSmceu5Lx6Wf9aPk7m6FvPulXxcOnQYcqzoIRoznWJNFOOs/ih18dY1FLi3F6YIcWVSlKmrLaElm3jLgk6oTLYzTQaZOqpMRortYoDVNs4pwFgCMEzZIgCASNfmkv+ZUXXenVovHWqqqCItaTgU09YjE69MyD0FB5fud+JZCQwk=
